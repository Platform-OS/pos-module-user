{% comment %}
  Destroys the current user's session.
{% endcomment %}
{% liquid
  function user = 'modules/user/lib/queries/user/current'
  graphql destory = 'modules/user/session/destroy'
  hash_assign destory['user'] = user

  unless destory.errors
    assign params = '{}' | parse_json | hash_merge: destory: destory
    function results = 'modules/core/lib/commands/hook/fire', hook: 'user_logout', params: params
    hash_assign destory['hook_results'] = results
  endunless

  return destory
%}
